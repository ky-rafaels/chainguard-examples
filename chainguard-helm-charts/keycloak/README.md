# Keycloak Deployment - Iamguarded

## *Optional* Exposing Keycloak from Local Ingress - Kind

```bash
kubectl apply -f https://kind.sigs.k8s.io/examples/ingress/deploy-ingress-nginx.yaml

# Save ExternalIP of Ingress 
INGRESS=$(kubectl get svc -n ingress-nginx ingress-nginx-controller -o jsonpath='{.status.loadBalancer.ingress[0].ip}')

cat <<EOF | sudo tee -a /etc/hosts
${INGRESS} keycloak.example.com
EOF

# Enable ingress
helm upgrade --install keycloak oci://cgr.dev/ky-rafaels.example.com/iamguarded-charts/keycloak -n keycloak \
--set ingress.enabled=true \
--set ingress.hostname="keycloak.example.com" \
--set ingress.ingressClassName=nginx
```

<!-- eventually enable TLS for this as well -->
<!-- tls:
  enabled: false
  autoGenerated: false
  usePem: true
  passwordsSecret: "" -->
